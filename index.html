<!DOCTYPE html>
<html>
<head>
  <title>Seva Booking</title>
</head>
<body>
  <h2>Seva Booking Form</h2>
  
  <form id="bookingForm">
    <input type="text" id="phone" placeholder="Phone Number" required><br><br>
    <input type="text" id="name" placeholder="Full Name"><br><br>
    <input type="email" id="email" placeholder="Email"><br><br>
    <input type="text" id="address" placeholder="Address"><br><br>
    <button type="submit">Submit</button>
  </form>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbzWdO2-btyq5OSqW2F-BdzsdWwzPT5VA41w9JIRhI30QGF9zp3clKo_7I7Jq-uutupOBQ/exec"; // Replace with your Apps Script Web App URL

    // Autofill when phone number is entered
    document.getElementById("phone").addEventListener("blur", function() {
      let phone = this.value;
      if (phone.length > 0) {
        fetch(scriptURL + "?phone=" + phone)
          .then(res => res.json())
          .then(data => {
            if (data.name) {
              document.getElementById("name").value = data.name;
              document.getElementById("email").value = data.email;
              document.getElementById("address").value = data.address;
            }
          });
      }
    });

    // Save details to Google Sheets
    document.getElementById("bookingForm").addEventListener("submit", function(e) {
      e.preventDefault();
      let data = {
        phone: document.getElementById("phone").value,
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        address: document.getElementById("address").value
      };

      fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify(data)
      })
      .then(res => res.text())
      .then(msg => alert(msg));
    });
  </script>
</body>
</html>
